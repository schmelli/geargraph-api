# Docker Compose for local development
# Assumes Memgraph is running elsewhere (e.g., on GCP server)

services:
  geargraph-api:
    build: .
    ports:
      - "8080:8080"
    environment:
      - MEMGRAPH_HOST=${MEMGRAPH_HOST:-localhost}
      - MEMGRAPH_PORT=${MEMGRAPH_PORT:-7687}
      - MEMGRAPH_USER=${MEMGRAPH_USER:-}
      - MEMGRAPH_PASSWORD=${MEMGRAPH_PASSWORD:-}
      - API_KEY=${API_KEY:-dev-key}
      - CORS_ORIGINS=${CORS_ORIGINS:-http://localhost:3000}
    env_file:
      - .env
    volumes:
      - ./app:/app/app  # Hot reload for development
    command: uvicorn app.main:app --host 0.0.0.0 --port 8080 --reload
